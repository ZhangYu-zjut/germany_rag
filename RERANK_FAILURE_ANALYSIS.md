# ReRankå¤±è´¥æ·±åº¦åˆ†æï¼šä¸ºä»€ä¹ˆè¿‡æ»¤äº†æœ€ä½³æ–‡æ¡£ï¼Ÿ

**é—®é¢˜**: Cohere ReRank v3.5å°†æ£€ç´¢æ’åç¬¬1çš„æ–‡æ¡£ï¼ˆ0.6194ï¼‰è¿‡æ»¤æ‰ï¼Œåè€Œæå‡äº†æ£€ç´¢æ’åç¬¬4çš„æ–‡æ¡£ï¼ˆ0.6082 â†’ 0.7712ï¼‰

---

## ğŸ¯ æ ¸å¿ƒçŸ›ç›¾ï¼šä¸¤ç§"ç›¸å…³æ€§"çš„å®šä¹‰å†²çª

```
æŸ¥è¯¢: "Welche konkreten MaÃŸnahmen und Positionen vertrat CDU/CSU
       im Jahr 2017 zu Abschiebung und RÃ¼ckfÃ¼hrung?"
```

### æ–¹æ¡ˆAï¼šBGE-M3çš„ç†è§£ï¼ˆè¯­ä¹‰ç›¸ä¼¼åº¦ï¼‰

```
å…³é”®è¯æå–: ["Abschiebung", "RÃ¼ckfÃ¼hrung", "MaÃŸnahmen", "Positionen"]
                    â†“
               å‘é‡ç©ºé—´æ˜ å°„
                    â†“
    æ–‡æ¡£: "die Ausreisepflicht auch mit Zwang durchsetzen"
           è¯­ä¹‰å‘é‡: [0.23, 0.67, 0.89, ...]  â† ä¸"Abschiebung"å‘é‡è·ç¦»è¿‘
                    â†“
            ä½™å¼¦ç›¸ä¼¼åº¦: 0.6194 âœ…
                    â†“
            æ’åç¬¬1ï¼ˆæœ€ç›¸å…³ï¼‰
```

**BGE-M3çš„é€»è¾‘**ï¼š
- "Zwang durchsetzen"ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰â‰ˆ "Abschiebung"ï¼ˆé£è¿”ï¼‰
- è¯­ä¹‰å‘é‡ç©ºé—´ä¸­è·ç¦»è¿‘
- âœ… **æ­£ç¡®è¯†åˆ«äº†éšå«çš„è¯­ä¹‰å…³è”**

---

### æ–¹æ¡ˆBï¼šCohere ReRankçš„ç†è§£ï¼ˆæŸ¥è¯¢-æ–‡æ¡£ç›¸å…³æ€§ï¼‰

```
æŸ¥è¯¢åˆ†æ:
- "Welche konkreten MaÃŸnahmen" â†’ æœŸå¾…ï¼šå…·ä½“çš„ã€å¯é‡åŒ–çš„æªæ–½æè¿°
- "Positionen vertrat" â†’ æœŸå¾…ï¼šç³»ç»Ÿæ€§çš„æ”¿ç­–ç«‹åœºé˜è¿°
                    â†“
         äº¤å‰ç¼–ç å™¨è¯„åˆ†ï¼ˆæŸ¥è¯¢Ã—æ–‡æ¡£ï¼‰
                    â†“
æ–‡æ¡£A: "...die Ausreisepflicht auch mit Zwang durchsetzen..."
    Cohereè¯„åˆ†: ~0.5 (æœªè¿›å…¥Top 15ï¼Œè¢«è¿‡æ»¤)
    åŸå› : âŒ åŸåˆ™æ€§å£°æ˜ï¼Œéå…·ä½“æªæ–½
         âŒ ç¼ºå°‘æ•°æ®æ”¯æ’‘
         âŒ å•å¥è¯ï¼Œéç³»ç»Ÿæ€§é˜è¿°

æ–‡æ¡£B: "Im Jahr 2016 hatten wir 25,000 abgelehnte Asylbewerber
        aus Afghanistan. Von diesen sind nur 67 Menschen
        zurÃ¼ckgefÃ¼hrt bzw. abgeschoben worden..."
    Cohereè¯„åˆ†: 0.7712 âœ…
    åŸå› : âœ… åŒ…å«å…·ä½“æ•°å­—ï¼ˆ25,000ã€67ã€12,800ã€72ï¼‰
         âœ… ç³»ç»Ÿæ€§æè¿°ï¼ˆæ—¶é—´èŒƒå›´ã€æ¡ˆä¾‹ã€æ•°æ®ï¼‰
         âœ… å¤šä¸ªå¥å­ï¼Œç»“æ„å®Œæ•´
```

**Cohereçš„é€»è¾‘**ï¼š
- "konkrete"ï¼ˆå…·ä½“çš„ï¼‰= æ•°å­—/æ•°æ®/æ¡ˆä¾‹
- "MaÃŸnahmen"ï¼ˆæªæ–½ï¼‰= æ”¿ç­–æªæ–½è€Œéæ‰§è¡Œæ‰‹æ®µ
- âŒ **å°†"Zwang durchsetzen"è¯¯åˆ¤ä¸ºæ‰§è¡Œç»†èŠ‚ï¼Œè€Œéæªæ–½æœ¬èº«**

---

## ğŸ“Š å¯¹æ¯”åˆ†æï¼šä¸¤ä¸ªæ–‡æ¡£çš„å·®å¼‚

| ç‰¹å¾ | Dr. Stephan Harbarth (è¢«è¿‡æ»¤) | Andrea Lindholz (è¢«æå‡) |
|------|-------------------------------|--------------------------|
| **æ£€ç´¢åˆ†æ•°** | **0.6194** (ç¬¬1) | 0.6082 (ç¬¬4) |
| **ReRankåˆ†æ•°** | <0.5 (è¢«è¿‡æ»¤) | **0.7712** (ç¬¬1) |
| **å…³é”®çŸ­è¯­** | "die Ausreisepflicht auch mit **Zwang durchsetzen**" | "25,000 abgelehnte Asylbewerber...67 Menschen zurÃ¼ckgefÃ¼hrt" |
| **å†…å®¹ç±»å‹** | åŸåˆ™æ€§å£°æ˜ | æ•°æ®å¯†é›†å‹æè¿° |
| **å…·ä½“æ•°å­—** | âŒ æ—  | âœ… 4ä¸ªï¼ˆ25,000, 67, 12,800, 72ï¼‰ |
| **è¯­è¨€é£æ ¼** | å¼ºè°ƒæ‰‹æ®µ/æ–¹å¼ | å¼ºè°ƒæªæ–½/æˆæœ |
| **æ–‡æœ¬é•¿åº¦** | è¾ƒé•¿æ®µè½ï¼ˆå¤šä¸»é¢˜æ··åˆï¼‰ | èšç„¦å•ä¸€æ¡ˆä¾‹ï¼ˆAfghanistanï¼‰ |
| **ä¸æŸ¥è¯¢è¯ç›´æ¥åŒ¹é…** | âœ… è¯­ä¹‰åŒ¹é… | âœ… å­—é¢åŒ¹é… |

---

## ğŸ” æ ¹æœ¬åŸå› ï¼š4ä¸ªå±‚é¢çš„ä¸åŒ¹é…

### 1. è¯­è¨€æ¨¡å‹çš„è®­ç»ƒåå·®

**Cohere ReRank v3.5çš„è®­ç»ƒç‰¹ç‚¹**ï¼š
- ä¸»è¦åŸºäºè‹±æ–‡è¯­æ–™
- é’ˆå¯¹é€šç”¨é—®ç­”ã€æ–‡æ¡£æ£€ç´¢åœºæ™¯ä¼˜åŒ–
- å¯¹å¾·è¯­è®®ä¼šå‘è¨€çš„ç‰¹æ®Šé£æ ¼é€‚åº”æ€§ä¸è¶³

**å¾·è¯­è®®ä¼šå‘è¨€çš„ç‰¹ç‚¹**ï¼š
- æ­£å¼ã€å†—é•¿ã€å¤šå±‚åµŒå¥—
- å¤§é‡å¤åˆè¯ï¼ˆAusreisepflicht, RÃ¼ckfÃ¼hrungsbehÃ¶rdenï¼‰
- åŸåˆ™æ€§å£°æ˜ä¸å…·ä½“æªæ–½æ··åˆ
- ä¿®è¾æ€§å¼ºï¼Œé—´æ¥è¡¨è¾¾

**ç»“æœ**ï¼šCohereå¯èƒ½æ— æ³•å‡†ç¡®ç†è§£å¾·è¯­æ”¿æ²»è¯­å¢ƒä¸‹çš„è¯­ä¹‰å…³ç³»

---

### 2. "å…·ä½“æ€§"çš„å®šä¹‰å·®å¼‚

**æŸ¥è¯¢ä¸­çš„"konkrete MaÃŸnahmen"**ï¼š

| ç†è§£æ–¹å¼ | å¯¹åº”å†…å®¹ | BGE-M3 | Cohere |
|---------|---------|--------|--------|
| ç‹­ä¹‰ç†è§£ | æ•°å­—ã€æ•°æ®ã€é‡åŒ–æŒ‡æ ‡ | âŒ | âœ… |
| å¹¿ä¹‰ç†è§£ | å…·ä½“æ”¿ç­–ã€æ‰§è¡Œæ‰‹æ®µã€æ˜ç¡®è¡¨è¿° | âœ… | âŒ |

**ç›®æ ‡æ–‡æ¡£"Zwang durchsetzen"**ï¼š
- BGE-M3è§†è§’ï¼šè¿™æ˜¯ä¸€ä¸ª**å…·ä½“çš„æ‰§è¡Œæ‰‹æ®µ**ï¼ˆç”¨å¼ºåˆ¶åŠ›æ‰§è¡Œé£è¿”ï¼‰
- Cohereè§†è§’ï¼šè¿™æ˜¯ä¸€ä¸ª**æŠ½è±¡çš„æ–¹å¼æè¿°**ï¼ˆç¼ºå°‘é‡åŒ–æ•°æ®ï¼‰

---

### 3. æŸ¥è¯¢-æ–‡æ¡£äº¤äº’çš„è¯¯åˆ¤

**æŸ¥è¯¢ç»“æ„åˆ†æ**ï¼š
```
"Welche [konkreten MaÃŸnahmen] und [Positionen] vertrat [CDU/CSU] im Jahr [2017] zu [Abschiebung und RÃ¼ckfÃ¼hrung]?"
    â†‘                         â†‘                                                      â†‘
  è¦æ±‚å…·ä½“æ€§                è¦æ±‚ç«‹åœº                                            ä¸»é¢˜é™å®š
```

**ç›®æ ‡æ–‡æ¡£åŒ¹é…åº¦**ï¼š
```
"die Ausreisepflicht auch mit Zwang durchsetzen"
   â†‘                         â†‘
 ä¸»é¢˜åŒ¹é…               å…·ä½“æ‰‹æ®µï¼ˆBGE-M3è®¤ä¸º"å…·ä½“"ï¼ŒCohereè®¤ä¸º"æŠ½è±¡"ï¼‰
```

**ç«äº‰æ–‡æ¡£åŒ¹é…åº¦**ï¼š
```
"25,000 abgelehnte Asylbewerber...67 Menschen zurÃ¼ckgefÃ¼hrt"
   â†‘                                  â†‘
 å…·ä½“æ•°å­—ï¼ˆCohereå¼ºçƒˆåå¥½ï¼‰      å…·ä½“æˆæœï¼ˆç¬¦åˆ"konkreten"ï¼‰
```

**Cohereçš„è¯¯åˆ¤**ï¼š
- è¿‡åº¦å…³æ³¨"konkrete"â†’æ•°å­—çš„è”æƒ³
- å¿½è§†äº†"MaÃŸnahmen"çš„è¯­ä¹‰èŒƒç•´ï¼ˆæ‰‹æ®µ/æªæ–½å¯ä»¥æ˜¯éé‡åŒ–çš„ï¼‰
- å°†"Zwang durchsetzen"å½’ç±»ä¸º"æ–¹å¼æè¿°"è€Œé"æªæ–½æœ¬èº«"

---

### 4. è¯„åˆ†æœºåˆ¶çš„æœ¬è´¨å·®å¼‚

#### BGE-M3ï¼ˆBi-Encoderï¼‰
```
Query Encoder: Q â†’ Vector_Q
Doc Encoder:   D â†’ Vector_D
Score = cosine_similarity(Vector_Q, Vector_D)
```

**ç‰¹ç‚¹**ï¼š
- âœ… å¿«é€Ÿï¼ˆç‹¬ç«‹ç¼–ç ï¼‰
- âœ… è¯­ä¹‰æ³›åŒ–èƒ½åŠ›å¼º
- âŒ ç¼ºå°‘æŸ¥è¯¢-æ–‡æ¡£äº¤äº’å»ºæ¨¡

**ç»“æœ**ï¼šèƒ½å‘ç°"Abschiebung"ä¸"Zwang durchsetzen"çš„è¯­ä¹‰å…³è”

---

#### Cohere ReRankï¼ˆCross-Encoderï¼‰
```
Input: [Query, Document]
       â†“
Cross-Attention Layers
       â†“
Score = Probability(relevant | Query, Document)
```

**ç‰¹ç‚¹**ï¼š
- âœ… ç²¾ç¡®ï¼ˆå»ºæ¨¡æŸ¥è¯¢-æ–‡æ¡£äº¤äº’ï¼‰
- âœ… èƒ½ç†è§£å¤æ‚è¯­ä¹‰å…³ç³»
- âŒ ä¾èµ–è®­ç»ƒæ•°æ®è´¨é‡å’Œé¢†åŸŸé€‚é…æ€§
- âŒ å¯¹"ç›¸å…³æ€§"çš„å®šä¹‰å¯èƒ½ä¸ä»»åŠ¡ä¸ä¸€è‡´

**ç»“æœ**ï¼š
- æ­£ç¡®è¯†åˆ«äº†"æ•°æ®å¯†é›†å‹"æ–‡æ¡£çš„ç›´æ¥ç›¸å…³æ€§
- é”™è¯¯åˆ¤æ–­äº†"åŸåˆ™æ€§å£°æ˜"çš„é—´æ¥ç›¸å…³æ€§
- **åœ¨å¾·è¯­æ”¿æ²»è¯­å¢ƒä¸‹çš„åˆ¤æ–­ä¸å¦‚é€šç”¨è¯­ä¹‰æ¨¡å‹**

---

## ğŸ¯ ä¸ºä»€ä¹ˆReRankåœ¨è¿™ä¸ªåœºæ™¯ä¸‹å¤±æ•ˆï¼Ÿ

### é—®é¢˜1ï¼šè®­ç»ƒç›®æ ‡ä¸åŒ¹é…

**Cohereè®­ç»ƒç›®æ ‡**ï¼ˆæ¨æµ‹ï¼‰ï¼š
- æ–‡æ¡£æ˜¯å¦ç›´æ¥å›ç­”æŸ¥è¯¢ï¼Ÿ
- æ–‡æ¡£æ˜¯å¦åŒ…å«æŸ¥è¯¢è¦æ±‚çš„ä¿¡æ¯ç±»å‹ï¼Ÿ
- ä¾‹å­ï¼š
  - Query: "What is the population of Paris?"
  - Doc A: "Paris has 2.1 million people" âœ… (ç›´æ¥å›ç­”)
  - Doc B: "Paris is the capital of France" âŒ (é—´æ¥ç›¸å…³)

**æˆ‘ä»¬çš„ä»»åŠ¡éœ€æ±‚**ï¼š
- æ–‡æ¡£æ˜¯å¦åŒ…å«ä¸æŸ¥è¯¢ä¸»é¢˜ç›¸å…³çš„**è¯­ä¹‰ä¿¡æ¯**ï¼Ÿ
- æ–‡æ¡£æ˜¯å¦åœ¨**åŒä¸€è¯­ä¹‰ç©ºé—´**è®¨è®ºé—®é¢˜ï¼Ÿ
- ä¾‹å­ï¼š
  - Query: "MaÃŸnahmen zu Abschiebung"
  - Doc A: "Zwang durchsetzen" âœ… (è¯­ä¹‰å¼ºå…³è”ï¼Œè™½ç„¶é—´æ¥)
  - Doc B: "25,000...67 abgeschoben" âœ… (ç›´æ¥ç›¸å…³ï¼Œä½†ä¸»é¢˜ä¸åŒï¼šAfghanistanç‰¹ä¾‹vsä¸€èˆ¬æ€§æ”¿ç­–)

**ç»“æœ**ï¼šCohereçš„è¯„åˆ†æ ‡å‡†æ›´é€‚åˆQAä»»åŠ¡ï¼Œä¸é€‚åˆæˆ‘ä»¬çš„è¯­ä¹‰æ£€ç´¢ä»»åŠ¡

---

### é—®é¢˜2ï¼šå¾·è¯­è¯­å¢ƒé€‚é…æ€§ä¸è¶³

**è¯æ®**ï¼š
1. å¯¹"konkrete"çš„ç†è§£è¿‡äºå­—é¢åŒ–ï¼ˆconcrete = æ•°å­—ï¼‰
2. æœªèƒ½ç†è§£"Zwang durchsetzen"åœ¨æ”¿æ²»è¯­å¢ƒä¸‹æ˜¯ä¸€ç§å…·ä½“æªæ–½è¡¨è¿°
3. å¯¹å¤åˆè¯çš„è¯­ä¹‰åˆ†è§£èƒ½åŠ›ä¸è¶³

**å¯¹æ¯”**ï¼šå¦‚æœæ˜¯è‹±æ–‡
```
Query: "What concrete measures did CDU/CSU propose for deportation?"
Doc A: "enforce deportation with coercion" â† Cohereå¯èƒ½è¯„åˆ†æ›´é«˜ï¼ˆè‹±æ–‡è¯­å¢ƒæ›´æ¸…æ™°ï¼‰
Doc B: "25,000 applications...67 deported" â† ä»ç„¶ä¼šé«˜åˆ†
```

---

### é—®é¢˜3ï¼šä¿ç•™æ¯”ä¾‹è¿‡äºæ¿€è¿›

**å½“å‰é…ç½®**ï¼š
```python
self.top_n = 15  # ä»26ä¸ªæ–‡æ¡£ä¸­é€‰15ä¸ªï¼Œè¿‡æ»¤42%
```

**é—®é¢˜**ï¼š
- æ£€ç´¢Top 1å¯èƒ½è¢«è¿‡æ»¤æ‰ï¼ˆæ­£å¦‚æœ¬æ¬¡æµ‹è¯•ï¼‰
- æ²¡æœ‰å¯¹æ£€ç´¢Top-Kè®¾ç½®"å¼ºåˆ¶ä¿ç•™"æœºåˆ¶

**æ›´å®‰å…¨çš„é…ç½®**ï¼š
```python
self.top_n = 20  # ä¿ç•™77%ï¼Œé™ä½è¯¯æ€é£é™©
# æˆ–è€…è®¾ç½®è§„åˆ™ï¼šæ£€ç´¢Top 5å¿…é¡»ä¿ç•™
```

---

## ğŸ’¡ è§£å†³æ–¹æ¡ˆå»ºè®®

### æ–¹æ¡ˆ1ï¼šç¦ç”¨ReRankï¼ˆæœ€ç®€å•ï¼Œæ¨èç«‹å³æµ‹è¯•ï¼‰

**ç†ç”±**ï¼š
1. âœ… BGE-M3çš„æ£€ç´¢å·²ç»å¾ˆå‡†ç¡®ï¼ˆç›®æ ‡æ–‡æ¡£æ’åç¬¬1ï¼‰
2. âœ… ReRankåè€Œå¼•å…¥å™ªå£°ï¼ˆè¿‡æ»¤äº†æœ€ä½³æ–‡æ¡£ï¼‰
3. âœ… å‡å°‘APIè°ƒç”¨æˆæœ¬å’Œå»¶è¿Ÿ

**å®æ–½**ï¼š
```python
# src/graph/workflow.py
# ä¿®æ”¹workflowï¼Œè·³è¿‡ReRankèŠ‚ç‚¹ï¼Œç›´æ¥ä»Retrieveâ†’Summarize
```

**é¢„æœŸæ•ˆæœ**ï¼š100%æˆåŠŸå¬å›ç›®æ ‡æ–‡æ¡£

---

### æ–¹æ¡ˆ2ï¼šæ··åˆæ’åºç­–ç•¥ï¼ˆä¿å®ˆæ”¹è¿›ï¼‰

**ç­–ç•¥**ï¼š
```python
def hybrid_rerank(retrieve_results, rerank_results, alpha=0.5):
    """
    æ··åˆBGE-M3æ£€ç´¢åˆ†æ•°å’ŒCohere ReRankåˆ†æ•°

    final_score = alpha * retrieve_score + (1 - alpha) * rerank_score
    """
    # å¼ºåˆ¶ä¿ç•™æ£€ç´¢Top 5
    top_k_retrieve = retrieve_results[:5]

    # å¯¹å…¶ä½™æ–‡æ¡£è¿›è¡ŒReRank
    reranked = rerank_results[5:]

    # èåˆåˆ†æ•°æ’åº
    final_ranking = merge_and_sort(top_k_retrieve, reranked, alpha)

    return final_ranking
```

**ä¼˜ç‚¹**ï¼š
- ä¿ç•™æ£€ç´¢é«˜åˆ†æ–‡æ¡£
- ä»ç„¶åˆ©ç”¨ReRankå¯¹é•¿å°¾æ–‡æ¡£çš„ç²¾æ’èƒ½åŠ›

---

### æ–¹æ¡ˆ3ï¼šè°ƒæ•´ReRankå‚æ•°ï¼ˆä¸´æ—¶ç¼“è§£ï¼‰

**ä¿®æ”¹**ï¼š
```python
# src/graph/nodes/rerank.py (ç¬¬42è¡Œ)
self.top_n = 20  # ä»15å¢åŠ åˆ°20ï¼Œå‡å°‘è¿‡æ»¤æ¯”ä¾‹
```

**æ•ˆæœ**ï¼š
- 26ä¸ªæ–‡æ¡£ â†’ ä¿ç•™20ä¸ªï¼ˆ77%ä¿ç•™ç‡ï¼‰
- ç›®æ ‡æ–‡æ¡£è¢«è¿‡æ»¤çš„æ¦‚ç‡é™ä½
- âš ï¸ æ— æ³•ä¿è¯100%ä¿ç•™

---

### æ–¹æ¡ˆ4ï¼šé’ˆå¯¹å¾·è¯­ä¼˜åŒ–çš„ReRankæ¨¡å‹ï¼ˆé•¿æœŸæ–¹æ¡ˆï¼‰

**é€‰é¡¹**ï¼š
1. ä½¿ç”¨å¤šè¯­è¨€ReRankæ¨¡å‹ï¼ˆå¦‚Jina Rerankerï¼‰
2. å¾®è°ƒCohereæ¨¡å‹ï¼ˆéœ€è¦å¤§é‡å¾·è¯­è®®ä¼šæ•°æ®ï¼‰
3. è®­ç»ƒè‡ªå®šä¹‰Cross-Encoderï¼ˆåŸºäºGerman BERTï¼‰

**æŠ•å…¥**ï¼šé«˜ â­â­â­â­â­

---

### æ–¹æ¡ˆ5ï¼šå…³é”®çŸ­è¯­åŒ¹é…åŠ æƒï¼ˆå¯å‘å¼ï¼‰

**é€»è¾‘**ï¼š
```python
def keyword_boost(doc, keywords, boost=0.2):
    """
    å¦‚æœæ–‡æ¡£åŒ…å«å…³é”®çŸ­è¯­ï¼Œæå‡ReRankåˆ†æ•°
    """
    if any(kw in doc for kw in keywords):
        return doc['rerank_score'] + boost
    return doc['rerank_score']

# å…³é”®è¯åˆ—è¡¨
critical_keywords = [
    "Zwang durchsetzen",
    "Ausreisegewahrsam",
    "Abschiebung",
    "RÃ¼ckfÃ¼hrung"
]
```

**ä¼˜ç‚¹**ï¼š
- ç®€å•æ˜“å®ç°
- é’ˆå¯¹æ€§å¼º
- å¯è§£é‡Šæ€§é«˜

**ç¼ºç‚¹**ï¼š
- éœ€è¦ç»´æŠ¤å…³é”®è¯åˆ—è¡¨
- å¯èƒ½å¼•å…¥åå·®

---

## ğŸ“‹ æ¨èè¡ŒåŠ¨è®¡åˆ’

### ç«‹å³æ‰§è¡Œï¼ˆä»Šå¤©ï¼‰

1. **æµ‹è¯•æ–¹æ¡ˆ1ï¼šç¦ç”¨ReRank**
   - ä¿®æ”¹workflowï¼Œè·³è¿‡ReRankèŠ‚ç‚¹
   - é‡æ–°è¿è¡ŒQ6æµ‹è¯•
   - é¢„æœŸï¼š100%å¬å›ç›®æ ‡æ–‡æ¡£

2. **éªŒè¯å¬å›æ•ˆæœ**
   - æ£€æŸ¥ç›®æ ‡æ–‡æ¡£æ˜¯å¦å‡ºç°åœ¨æœ€ç»ˆå¼•ç”¨ä¸­
   - éªŒè¯"Zwang durchsetzen"æ˜¯å¦è¢«æ€»ç»“

---

### çŸ­æœŸä¼˜åŒ–ï¼ˆæœ¬å‘¨ï¼‰

3. **å®æ–½æ–¹æ¡ˆ2ï¼šæ··åˆæ’åº**
   - å¼€å‘hybrid_rerankå‡½æ•°
   - A/Bæµ‹è¯•ï¼šçº¯BGE vs æ··åˆç­–ç•¥ vs çº¯Cohere
   - åœ¨Q1-Q10ä¸Šå…¨é¢è¯„ä¼°

4. **è°ƒæ•´ReRankå‚æ•°**
   - top_n: 15 â†’ 20
   - è¯„ä¼°å¯¹å…¶ä»–é—®é¢˜çš„å½±å“

---

### é•¿æœŸç ”ç©¶ï¼ˆæœ¬æœˆï¼‰

5. **å¤šæ¨¡å‹å¯¹æ¯”**
   - æµ‹è¯•Jina Reranker v2ï¼ˆå¤šè¯­è¨€ï¼‰
   - æµ‹è¯•Cohere Rerank v3.5 vs v2
   - è®°å½•ä¸åŒæ¨¡å‹åœ¨å¾·è¯­ä¸Šçš„è¡¨ç°

6. **å»ºç«‹è¯„ä¼°åŸºå‡†**
   - æ ‡æ³¨50ä¸ªquery-docå¯¹çš„ç›¸å…³æ€§
   - è¯„ä¼°ä¸åŒReRankæ¨¡å‹çš„å‡†ç¡®ç‡
   - ç¡®å®šæœ€ä½³æ–¹æ¡ˆ

---

## ğŸ“ ç»éªŒæ€»ç»“

### æ•™è®­1ï¼šä¸è¦ç›²ç›®ä¿¡ä»»ReRank

**å¸¸è§è¯¯è§£**ï¼š
- âŒ "ReRankæ€»æ˜¯æ¯”æ£€ç´¢æ›´å‡†ç¡®"
- âœ… "ReRankåœ¨è®­ç»ƒåˆ†å¸ƒå†…æ‰æ›´å‡†ç¡®"

**çœŸç›¸**ï¼š
- ReRankæ¨¡å‹é«˜åº¦ä¾èµ–è®­ç»ƒæ•°æ®
- è·¨è¯­è¨€ã€è·¨é¢†åŸŸåœºæ™¯å¯èƒ½è¡¨ç°ä¸ä½³
- å‘é‡æ£€ç´¢çš„æ³›åŒ–èƒ½åŠ›å¯èƒ½æ›´å¼º

---

### æ•™è®­2ï¼šè¯„ä¼°æŒ‡æ ‡è¦å¯¹é½ä»»åŠ¡ç›®æ ‡

**æˆ‘ä»¬çš„ç›®æ ‡**ï¼š
- æ‰¾åˆ°ä¸æŸ¥è¯¢**è¯­ä¹‰ç›¸å…³**çš„æ–‡æ¡£
- æ”¯æŒå˜åŒ–åˆ†æã€å¯¹æ¯”ç­‰å¤æ‚ä»»åŠ¡
- åå¥½åŸåˆ™æ€§å£°æ˜å’Œæ”¿ç­–ç«‹åœº

**Cohereçš„ä¼˜åŒ–ç›®æ ‡**ï¼ˆæ¨æµ‹ï¼‰ï¼š
- ç›´æ¥å›ç­”é—®é¢˜
- åå¥½æ•°æ®å¯†é›†å‹å†…å®¹
- QAä»»åŠ¡å¯¼å‘

**ç»“æœ**ï¼šç›®æ ‡ä¸ä¸€è‡´å¯¼è‡´æ•ˆæœä¸ä½³

---

### æ•™è®­3ï¼šä¿ç•™æ£€ç´¢Top-Kä½œä¸ºå®‰å…¨ç½‘

**æœ€ä½³å®è·µ**ï¼š
- æ£€ç´¢Top 3-5åº”è¯¥**å¼ºåˆ¶ä¿ç•™**
- ReRankåªå¯¹é•¿å°¾æ–‡æ¡£è¿›è¡Œç²¾æ’
- é¿å…"ä¸€åˆ€åˆ‡"çš„è¿‡æ»¤ç­–ç•¥

---

## ğŸ”¬ é™„å½•ï¼šReRank APIè°ƒç”¨è¯¦æƒ…

### å®é™…è°ƒç”¨å‚æ•°
```json
{
  "model": "rerank-v3.5",
  "query": "Welche konkreten MaÃŸnahmen und Positionen vertrat CDU/CSU im Jahr 2017 zu Abschiebung und RÃ¼ckfÃ¼hrung?",
  "documents": [
    {"text": "Frau PrÃ¤sidentin! Meine sehr geehrten Damen und Herren! ... die Ausreisepflicht auch mit Zwang durchsetzen..."},
    {"text": "Sehr verehrte Frau PrÃ¤sidentin! ... hÃ¤rtere Gangart in Sachen Abschiebungen..."},
    ...
  ],
  "top_n": 15
}
```

### è¿”å›ç»“æœ
```json
{
  "results": [
    {"index": 3, "relevance_score": 0.7712},  // Andrea Lindholz (æ£€ç´¢æ’åç¬¬4)
    {"index": 4, "relevance_score": 0.5758},  // Dr. Stephan Harbarth (å¦ä¸€ä¸ªchunk)
    ...
    // æ£€ç´¢æ’åç¬¬1çš„chunkæœªåœ¨Top 15ä¸­
  ]
}
```

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-11-19 13:15:00
**ä¸‹ä¸€æ­¥**: ç«‹å³æµ‹è¯•ç¦ç”¨ReRankæ–¹æ¡ˆ
