# å¾·å›½è®®ä¼šæ™ºèƒ½é—®ç­”RAGç³»ç»Ÿ

åŸºäºLangGraphå’ŒMilvusçš„å¾·å›½è”é‚¦è®®é™¢æ–‡æ¡£æ™ºèƒ½é—®ç­”ç³»ç»Ÿ

> ğŸ“˜ **æ–°äººå¿…è¯»**: æŸ¥çœ‹ [`PROJECT_HANDOVER.md`](PROJECT_HANDOVER.md) è·å–å®Œæ•´çš„é¡¹ç›®äº¤æ¥æ–‡æ¡£  
> ğŸš€ **å¿«é€Ÿå‚è€ƒ**: æŸ¥çœ‹ [`QUICK_REFERENCE.md`](QUICK_REFERENCE.md) è·å–å…³é”®ä¿¡æ¯é€ŸæŸ¥

## ğŸ¯ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªæ™ºèƒ½çš„å¾·å›½è®®ä¼šæ–‡æ¡£é—®ç­”ç³»ç»Ÿ,èƒ½å¤Ÿ:
- ğŸ“š å¤„ç†1949-2021å¹´çš„å¾·å›½è”é‚¦è®®é™¢æ¼”è®²è®°å½•
- ğŸ¤– ä½¿ç”¨Gemini 2.5 Proè¿›è¡Œæ™ºèƒ½é—®ç­”
- ğŸ” åŸºäºMilvuså‘é‡æ•°æ®åº“å®ç°æ··åˆæ£€ç´¢
- ğŸŒŠ é€šè¿‡LangGraphå®ç°å¤æ‚é—®é¢˜çš„CoAå¤„ç†æµç¨‹

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **LLM**: Gemini 2.5 Pro (via OpenAI API)
- **Embedding**: Gemini Embedding (1536ç»´)
- **å‘é‡æ•°æ®åº“**: Milvus (æœ¬åœ°/äº‘ç«¯å¯åˆ‡æ¢)
- **å·¥ä½œæµæ¡†æ¶**: LangGraph
- **æ•°æ®å¤„ç†**: LangChain

### é¡¹ç›®ç»“æ„

```
tj_germany/
â”œâ”€â”€ src/                      # æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ settings.py      # ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ utils/               # å·¥å…·æ¨¡å—
â”‚   â”‚   â””â”€â”€ logger.py        # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ data_loader/         # æ•°æ®å¤„ç†
â”‚   â”‚   â”œâ”€â”€ loader.py        # æ•°æ®åŠ è½½
â”‚   â”‚   â”œâ”€â”€ splitter.py      # æ–‡æœ¬åˆ†å—
â”‚   â”‚   â””â”€â”€ mapper.py        # å…ƒæ•°æ®æ˜ å°„
â”‚   â”œâ”€â”€ llm/                 # LLMå°è£…
â”‚   â”‚   â”œâ”€â”€ client.py        # LLMå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ embeddings.py    # Embeddingå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ prompts.py       # Promptæ¨¡æ¿
â”‚   â”œâ”€â”€ vectordb/            # å‘é‡æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ client.py        # Milvuså®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ collection.py    # Collectionç®¡ç†
â”‚   â”‚   â””â”€â”€ retriever.py     # æ£€ç´¢å™¨
â”‚   â””â”€â”€ graph/               # LangGraphå·¥ä½œæµ
â”‚       â”œâ”€â”€ state.py         # çŠ¶æ€å®šä¹‰
â”‚       â”œâ”€â”€ nodes/           # å·¥ä½œæµèŠ‚ç‚¹
â”‚       â”‚   â”œâ”€â”€ intent.py    # æ„å›¾åˆ¤æ–­
â”‚       â”‚   â”œâ”€â”€ classify.py  # é—®é¢˜åˆ†ç±»
â”‚       â”‚   â”œâ”€â”€ extract.py   # å‚æ•°æå–
â”‚       â”‚   â”œâ”€â”€ decompose.py # é—®é¢˜æ‹†è§£
â”‚       â”‚   â”œâ”€â”€ retrieve.py  # æ•°æ®æ£€ç´¢
â”‚       â”‚   â”œâ”€â”€ summarize.py # æ€»ç»“
â”‚       â”‚   â””â”€â”€ exception.py # å¼‚å¸¸å¤„ç†
â”‚       â””â”€â”€ workflow.py      # å·¥ä½œæµç¼–æ’
â”œâ”€â”€ data/                    # æ•°æ®ç›®å½•
â”‚   â””â”€â”€ pp_json_49-21/       # JSONæ•°æ®æ–‡ä»¶
â”œâ”€â”€ docs/                    # æ–‡æ¡£
â”œâ”€â”€ tests/                   # æµ‹è¯•
â”œâ”€â”€ build_index.py           # ç´¢å¼•æ„å»ºè„šæœ¬
â”œâ”€â”€ test_retrieval.py        # æ£€ç´¢æµ‹è¯•è„šæœ¬
â”œâ”€â”€ test_workflow.py         # å·¥ä½œæµæµ‹è¯•è„šæœ¬
â”œâ”€â”€ main.py                  # ä¸»ç¨‹åº(äº¤äº’å¼é—®ç­”)
â”œâ”€â”€ .env                     # ç¯å¢ƒå˜é‡
â””â”€â”€ requirements.txt         # ä¾èµ–åŒ…
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

#### å®‰è£…Pythonä¾èµ–

```bash
pip install -r requirements.txt
```

#### å¯åŠ¨MilvusæœåŠ¡(æœ¬åœ°æ¨¡å¼)

```bash
# ä½¿ç”¨Dockerå¯åŠ¨Milvus
docker run -d --name milvus -p 19530:19530 milvusdb/milvus:latest
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `.env` æ–‡ä»¶:

```bash
# LLMé…ç½®
OPENAI_API_KEY=your_api_key_here
THIRD_PARTY_BASE_URL=https://api.evolink.ai/v1
THIRD_PARTY_MODEL_NAME=gemini-2.5-pro

# Embeddingé…ç½®
GEMINI_EMBEDDING_MODEL=text-embedding-004
EMBEDDING_DIMENSION=1536

# Milvusé…ç½®
MILVUS_MODE=local  # æˆ– cloud
MILVUS_LOCAL_HOST=localhost
MILVUS_LOCAL_PORT=19530

# æ•°æ®æ¨¡å¼
DATA_MODE=PART  # PART: 2019-2021æ•°æ®, ALL: å…¨éƒ¨æ•°æ®
PART_DATA_YEARS=2019,2020,2021
```

### 3. æ„å»ºç´¢å¼•

```bash
# åŠ è½½æ•°æ® -> åˆ†å— -> Embedding -> å­˜å‚¨åˆ°Milvus
python build_index.py
```

è¿™å°†:
1. åŠ è½½JSONæ•°æ®(æ ¹æ®DATA_MODEé…ç½®)
2. æ–‡æœ¬åˆ†å—(1000å­—ç¬¦/chunk,200å­—ç¬¦é‡å )
3. ç”Ÿæˆå‘é‡(Gemini Embedding)
4. å­˜å‚¨åˆ°Milvus

### 4. æµ‹è¯•æ£€ç´¢

```bash
# æµ‹è¯•å‘é‡æ£€ç´¢å’Œå…ƒæ•°æ®è¿‡æ»¤
python test_retrieval.py
```

æµ‹è¯•å†…å®¹:
- âœ… ç®€å•å‘é‡æ£€ç´¢
- âœ… æŒ‰å¹´ä»½è¿‡æ»¤
- âœ… æŒ‰å…šæ´¾è¿‡æ»¤
- âœ… å¤åˆæ¡ä»¶è¿‡æ»¤

### 5. è¿è¡Œæ™ºèƒ½é—®ç­”ç³»ç»Ÿ

#### äº¤äº’å¼é—®ç­”

```bash
# å¯åŠ¨äº¤äº’å¼é—®ç­”ç•Œé¢
python main.py
```

æ”¯æŒçš„é—®é¢˜ç±»å‹:
- **ç®€å•æŸ¥è¯¢**: "2019å¹´å¾·å›½è”é‚¦è®®é™¢è®¨è®ºäº†å“ªäº›ä¸»è¦è®®é¢˜?"
- **å˜åŒ–ç±»**: "åœ¨2015-2018å¹´æœŸé—´,ä¸åŒå…šæ´¾åœ¨éš¾æ°‘é—®é¢˜ä¸Šçš„ç«‹åœºæœ‰ä½•å˜åŒ–?"
- **å¯¹æ¯”ç±»**: "è¯·å¯¹æ¯”CDU/CSUå’ŒSPDåœ¨2019å¹´å¯¹æ•°å­—åŒ–æ”¿ç­–çš„è§‚ç‚¹"
- **æ€»ç»“ç±»**: "è¯·æ€»ç»“Merkelåœ¨2019å¹´å…³äºæ¬§ç›Ÿä¸€ä½“åŒ–çš„ä¸»è¦è§‚ç‚¹"

#### æµ‹è¯•å·¥ä½œæµ

```bash
# æµ‹è¯•LangGraphå·¥ä½œæµ
python test_workflow.py
```

æµ‹è¯•å†…å®¹:
- âœ… ç®€å•é—®é¢˜å¤„ç†
- âœ… å¤æ‚é—®é¢˜æ‹†è§£
- âœ… å¯¹æ¯”ç±»é—®é¢˜
- âœ… æ€»ç»“ç±»é—®é¢˜
- âœ… æµå¼æ¨¡å¼
- âœ… æ— ææ–™å¤„ç†

## ğŸ“š ä½¿ç”¨ç¤ºä¾‹

### æ•°æ®åŠ è½½

```python
from src.data_loader import ParliamentDataLoader

# åˆå§‹åŒ–åŠ è½½å™¨
loader = ParliamentDataLoader()

# åŠ è½½æ•°æ®(è‡ªåŠ¨æ ¹æ®DATA_MODEé…ç½®)
speeches = loader.load_data()
print(f"åŠ è½½äº† {len(speeches)} æ¡æ¼”è®²")

# è·å–ç»Ÿè®¡ä¿¡æ¯
stats = loader.get_statistics(speeches)
```

### æ–‡æœ¬åˆ†å—

```python
from src.data_loader import ParliamentTextSplitter

# åˆå§‹åŒ–åˆ†å—å™¨
splitter = ParliamentTextSplitter(
    chunk_size=1000,
    chunk_overlap=200
)

# åˆ†å—
chunks = splitter.split_speeches(speeches)
print(f"ç”Ÿæˆäº† {len(chunks)} ä¸ªchunks")
```

### Embedding

```python
from src.llm import GeminiEmbeddingClient

# åˆå§‹åŒ–å®¢æˆ·ç«¯
embedding_client = GeminiEmbeddingClient()

# å•æ–‡æœ¬embedding
vector = embedding_client.embed_text("å¾·å›½è”é‚¦è®®é™¢")

# æ‰¹é‡embedding
vectors = embedding_client.embed_batch(texts, batch_size=50)

# Chunks embedding
embedded_chunks = embedding_client.embed_chunks(chunks)
```

### æ£€ç´¢

```python
from src.vectordb import MilvusClient, MilvusCollectionManager, MilvusRetriever
from src.llm import GeminiEmbeddingClient

# è¿æ¥Milvus
with MilvusClient() as client:
    # è·å–Collection
    manager = MilvusCollectionManager()
    manager.collection.load()
    
    # åˆ›å»ºæ£€ç´¢å™¨
    retriever = MilvusRetriever(manager.collection, top_k=5)
    
    # ç”ŸæˆæŸ¥è¯¢å‘é‡
    embedding_client = GeminiEmbeddingClient()
    query_vector = embedding_client.embed_text("æ°”å€™æ”¿ç­–")
    
    # æ£€ç´¢(å¸¦å…ƒæ•°æ®è¿‡æ»¤)
    results = retriever.search_by_metadata(
        query_vector=query_vector,
        year="2020",
        party="GRÃœNE",
        top_k=5
    )
```

### LangGraphå·¥ä½œæµ

```python
from src.graph import QuestionAnswerWorkflow

# åˆå§‹åŒ–å·¥ä½œæµ
workflow = QuestionAnswerWorkflow()

# è¿è¡Œå·¥ä½œæµ
question = "åœ¨2019å¹´åˆ°2020å¹´æœŸé—´,ä¸åŒå…šæ´¾åœ¨æ°”å€™ä¿æŠ¤é—®é¢˜ä¸Šçš„è®¨è®ºå‘ç”Ÿäº†æ€æ ·çš„å˜åŒ–?"
result = workflow.run(question, verbose=True)

# è·å–ç»“æœ
print(f"é—®é¢˜ç±»å‹: {result['question_type']}")
print(f"å­é—®é¢˜æ•°: {len(result.get('sub_questions', []))}")
print(f"ç­”æ¡ˆ: {result['final_answer']}")

# æµå¼æ¨¡å¼(ç”¨äºè°ƒè¯•)
for state in workflow.stream(question):
    print(state['current_node'])
```

**å·¥ä½œæµèŠ‚ç‚¹**:
1. **IntentNode** - æ„å›¾åˆ¤æ–­(ç®€å•/å¤æ‚)
2. **ClassifyNode** - é—®é¢˜åˆ†ç±»(å˜åŒ–ç±»/æ€»ç»“ç±»/å¯¹æ¯”ç±»/äº‹å®æŸ¥è¯¢/è¶‹åŠ¿åˆ†æ)
3. **ExtractNode** - å‚æ•°æå–(æ—¶é—´/å…šæ´¾/è®®å‘˜/ä¸»é¢˜)
4. **DecomposeNode** - é—®é¢˜æ‹†è§£(æ¨¡æ¿åŒ–/è‡ªç”±æ‹†è§£)
5. **RetrieveNode** - æ•°æ®æ£€ç´¢(æ··åˆæ£€ç´¢)
6. **SummarizeNode** - æ€»ç»“(å•é—®é¢˜/å¤šé—®é¢˜)
7. **ExceptionNode** - å¼‚å¸¸å¤„ç†(æ— ææ–™/é”™è¯¯)

**è·¯ç”±è§„åˆ™**:
```
Intent â†’ Classify (å¤æ‚é—®é¢˜) / Extract (ç®€å•é—®é¢˜)
Classify â†’ Extract
Extract â†’ Decompose (éœ€æ‹†è§£) / Retrieve (ä¸æ‹†è§£)
Decompose â†’ Retrieve
Retrieve â†’ Summarize (æ‰¾åˆ°ææ–™) / Exception (æœªæ‰¾åˆ°)
Summarize â†’ END
Exception â†’ END
```

### LLMè°ƒç”¨

```python
from src.llm import GeminiLLMClient

# åˆå§‹åŒ–å®¢æˆ·ç«¯
llm = GeminiLLMClient()

# ç®€å•è°ƒç”¨
response = llm.invoke_with_prompt(
    user_message="ä»€ä¹ˆæ˜¯LangChain?",
    system_prompt="ä½ æ˜¯ä¸€ä¸ªhelpfulçš„AIåŠ©æ‰‹ã€‚"
)

# æµå¼è¾“å‡º
for chunk in llm.stream_invoke(
    messages=[{'role': 'user', 'content': 'ä»‹ç»å¾·å›½è®®ä¼š'}]
):
    print(chunk, end="", flush=True)
```

## ğŸ”§ é…ç½®è¯´æ˜

### æ•°æ®æ¨¡å¼åˆ‡æ¢

```bash
# éƒ¨åˆ†æ•°æ®æ¨¡å¼(ç”¨äºå¼€å‘æµ‹è¯•)
DATA_MODE=PART
PART_DATA_YEARS=2019,2020,2021

# å…¨é‡æ•°æ®æ¨¡å¼(ç”¨äºç”Ÿäº§)
DATA_MODE=ALL
```

### Milvusæ¨¡å¼åˆ‡æ¢

```bash
# æœ¬åœ°æ¨¡å¼
MILVUS_MODE=local
MILVUS_LOCAL_HOST=localhost
MILVUS_LOCAL_PORT=19530

# äº‘ç«¯æ¨¡å¼
MILVUS_MODE=cloud
MILVUS_CLOUD_URI=your_cloud_uri
MILVUS_CLOUD_TOKEN=your_cloud_token
```

## ğŸ“Š æ•°æ®è¯´æ˜

### æ•°æ®æ¥æº

- **æ•°æ®èŒƒå›´**: 1949-2021å¹´å¾·å›½è”é‚¦è®®é™¢æ¼”è®²è®°å½•
- **æ•°æ®æ ¼å¼**: JSON
- **æ•°æ®é‡**: çº¦81ä¸‡æ¡è®°å½•(å…¨é‡)

### Metadataå­—æ®µ

æ¯æ¡è®°å½•åŒ…å«ä»¥ä¸‹metadata:

```python
{
    "year": "1983",           # å¹´ä»½
    "month": "05",            # æœˆä»½
    "day": "05",              # æ—¥æœŸ
    "session": "005",         # ä¼šè®®ç¼–å·
    "speaker": "Dr. Althammer",  # å‘è¨€äºº
    "group": "CDU/CSU",       # å…šæ´¾(å¾·è¯­)
    "group_chinese": "åŸºæ°‘ç›Ÿ/åŸºç¤¾ç›Ÿ",  # å…šæ´¾(ä¸­æ–‡)
    "lp": "10",               # ç«‹æ³•æœŸ
    "file": "pp_1983.json"    # æºæ–‡ä»¶
}
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
pytest tests/
```

### å•å…ƒæµ‹è¯•

```bash
# æµ‹è¯•æ•°æ®åŠ è½½
pytest tests/test_data_loader.py

# æµ‹è¯•LLM
pytest tests/test_llm.py

# æµ‹è¯•å‘é‡æ•°æ®åº“
pytest tests/test_vectordb.py
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æ‰¹é‡å¤„ç†

- Embedding: æ‰¹é‡å¤§å°50-100
- Milvusæ’å…¥: æ‰¹é‡æ’å…¥1000æ¡

### ç´¢å¼•ä¼˜åŒ–

- å‘é‡ç´¢å¼•: IVF_FLAT (nlist=1024)
- å…ƒæ•°æ®è¿‡æ»¤: è‡ªåŠ¨ä½¿ç”¨æ ‡é‡ç´¢å¼•

## ğŸ› å¸¸è§é—®é¢˜

### 1. Milvusè¿æ¥å¤±è´¥

**é—®é¢˜**: `ConnectionRefusedError`

**è§£å†³**:
```bash
# æ£€æŸ¥Milvusæ˜¯å¦è¿è¡Œ
docker ps | grep milvus

# å¯åŠ¨Milvus
docker start milvus
```

### 2. Embedding APIè°ƒç”¨å¤±è´¥

**é—®é¢˜**: API Keyé”™è¯¯

**è§£å†³**:
- æ£€æŸ¥ `.env` ä¸­çš„ `OPENAI_API_KEY`
- ç¡®è®¤APIé…é¢å……è¶³

### 3. å†…å­˜ä¸è¶³

**é—®é¢˜**: å¤„ç†å¤§é‡æ•°æ®æ—¶OOM

**è§£å†³**:
- å‡å° `chunk_size` (é»˜è®¤1000)
- å‡å°æ‰¹é‡å¤„ç†å¤§å°
- ä½¿ç”¨ `DATA_MODE=PART` æ¨¡å¼

## ğŸ“ å¼€å‘è®¡åˆ’

- [x] Phase 1: åŸºç¡€æ¡†æ¶ (100%)
- [x] Phase 2: æ•°æ®å¤„ç† (100%)
- [x] Phase 3: LLMå°è£… (100%)
- [x] Phase 4: å‘é‡æ•°æ®åº“ (100%)
- [x] Phase 5: LangGraphå·¥ä½œæµ (100%)
- [ ] Phase 6: æµ‹è¯•ä¸ä¼˜åŒ– (0%)
- [ ] Phase 7: æ–‡æ¡£ä¸éƒ¨ç½² (0%)

è¯¦è§ [`docs/å¼€å‘è®¡åˆ’.md`](docs/å¼€å‘è®¡åˆ’.md)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### CoA (Chain of Agents) å·¥ä½œæµ

åŸºäºLangGraphå®ç°çš„æ™ºèƒ½é—®ç­”æµç¨‹:

1. **æ„å›¾åˆ¤æ–­**: è‡ªåŠ¨è¯†åˆ«é—®é¢˜å¤æ‚åº¦
2. **é—®é¢˜åˆ†ç±»**: åˆ†ç±»ä¸ºå˜åŒ–ç±»/æ€»ç»“ç±»/å¯¹æ¯”ç±»ç­‰
3. **å‚æ•°æå–**: æå–æ—¶é—´ã€å…šæ´¾ã€è®®å‘˜ã€ä¸»é¢˜
4. **é—®é¢˜æ‹†è§£**: å°†å¤æ‚é—®é¢˜æ‹†è§£ä¸ºå¤šä¸ªå­é—®é¢˜
5. **æ··åˆæ£€ç´¢**: å‘é‡æ£€ç´¢ + å…ƒæ•°æ®è¿‡æ»¤
6. **æ™ºèƒ½æ€»ç»“**: ç»¼åˆå¤šä¸ªå­ç­”æ¡ˆ
7. **å¼‚å¸¸å¤„ç†**: å‹å¥½çš„é”™è¯¯æç¤º

### æ··åˆæ£€ç´¢

ç»“åˆå‘é‡ç›¸ä¼¼åº¦å’Œå…ƒæ•°æ®è¿‡æ»¤:
- è¯­ä¹‰æ£€ç´¢: åŸºäºGemini Embeddingçš„å‘é‡ç›¸ä¼¼åº¦
- ç²¾ç¡®è¿‡æ»¤: æŒ‰å¹´ä»½ã€å…šæ´¾ã€è®®å‘˜ç­‰è¿‡æ»¤
- å¤åˆæŸ¥è¯¢: æ”¯æŒå¤šæ¡ä»¶ç»„åˆ

### æ™ºèƒ½é—®é¢˜å¤„ç†

- **ç®€å•é—®é¢˜**: ç›´æ¥æ£€ç´¢+æ€»ç»“
- **å¤æ‚é—®é¢˜**: è‡ªåŠ¨æ‹†è§£â†’åˆ†åˆ«æ£€ç´¢â†’ç»¼åˆæ€»ç»“
- **å˜åŒ–ç±»**: æŒ‰å¹´ä»½Ã—å…šæ´¾æ‹†è§£
- **å¯¹æ¯”ç±»**: æŒ‰å…šæ´¾Ã—æ—¶é—´æ®µæ‹†è§£
- **æ€»ç»“ç±»**: æŒ‰ä¸»é¢˜Ã—æ—¶é—´æ‹†è§£

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Request!

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜,è¯·æäº¤Issueã€‚

---

**æ›´æ–°æ—¶é—´**: 2025-10-30  
**ç‰ˆæœ¬**: v0.1.0
| CDU/CSU | åŸºæ°‘ç›Ÿ/åŸºç¤¾ç›Ÿ | 123,903 |
| SPD | ç¤¾æ°‘å…š | 117,196 |
| FDP | è‡ªæ°‘å…š | 50,415 |
| GrÃ¼ne/BÃ¼ndnis 90 | ç»¿å…š | 24,317 |
| DIE LINKE | å·¦ç¿¼å…š | 15,932 |
| PDS | æ°‘ä¸»ç¤¾ä¼šä¸»ä¹‰å…š | 4,915 |
| AfD | å¾·å›½é€‰æ‹©å…š | 4,928 |
| KPD | å¾·å›½å…±äº§å…š | 2,192 |

**ç‰¹æ®Šæ ‡æ³¨**:
- `None`: æ— å…šæ´¾æˆ–æœªæ ‡æ³¨ (443,291æ¬¡)
- `Fraktionslos/fraktionslos`: æ— å…šæ´¾
- `-Gast`: å®¢åº§è®®å‘˜
- `-Hosp.`: å€™è¡¥è®®å‘˜

### 2. map.csv - è®®å‘˜-å…šæ´¾åŠ¨æ€æ˜ å°„è¡¨

**æ–‡ä»¶è¯´æ˜**: è®°å½•æ¯ä½è®®å‘˜åœ¨ä¸åŒå¹´ä»½æ‰€å±çš„å…šæ´¾

**åˆ—å­—æ®µ**:
- `è®®å‘˜å§“å`: è®®å‘˜çš„å…¨å
- `å¹´ä»½`: è®°å½•æ‰€å±çš„å¹´ä»½
- `æ‰€å±å…šæ´¾`: è¯¥å¹´ä»½è¯¥è®®å‘˜æ‰€å±çš„å…šæ´¾
- `å¤‡æ³¨`: ç‰¹æ®Šæƒ…å†µè¯´æ˜ï¼ˆå¦‚åŒä¸€å¹´å±äºå¤šä¸ªå…šæ´¾ï¼‰

**æ•°æ®è§„æ¨¡**:
- æ€»è®°å½•æ•°: 35,861æ¡
- åŒ…å«çº¦9,291ä½ä¸åŒçš„å‘è¨€äºº

**æ•°æ®ç‰¹ç‚¹**:
- è®°å½•äº†è®®å‘˜çš„å…šæ´¾å˜åŠ¨æƒ…å†µ
- éƒ¨åˆ†è®®å‘˜åœ¨åŒä¸€å¹´å¯èƒ½æœ‰å¤šä¸ªå…šæ´¾æ ‡æ³¨ï¼ˆå…šæ´¾å˜æ›´ï¼‰
- åŒ…æ‹¬ä¸»å¸­ã€å‰¯ä¸»å¸­ç­‰èŒä½çš„å‘è¨€è®°å½•

### 3. summary_report.txt - è¯¦ç»†ç»Ÿè®¡åˆ†ææŠ¥å‘Š

**æ–‡ä»¶è¯´æ˜**: å®Œæ•´çš„æ•°æ®ç»Ÿè®¡åˆ†ææŠ¥å‘Š

**æŠ¥å‘Šå†…å®¹**:
1. **å…šæ´¾åˆ†å¸ƒç»Ÿè®¡**: 53ä¸ªä¸åŒå…šæ´¾çš„è¯¦ç»†ç»Ÿè®¡
2. **å‘è¨€äººåˆ†å¸ƒç»Ÿè®¡**: 9,291ä½å‘è¨€äººçš„å‘è¨€æ¬¡æ•°æ’å
3. **å„å¹´ä»½å…šæ´¾åˆ†å¸ƒ**: 1949-2021å¹´æ¯å¹´çš„å…šæ´¾åˆ†å¸ƒè¯¦æƒ…
4. **è®®å‘˜å…šæ´¾å˜åŠ¨æƒ…å†µ**: è®°å½•äº†å…šæ´¾å˜æ›´çš„è®®å‘˜åå•

**å‘è¨€æ¬¡æ•°å‰10çš„è®®å‘˜**:
1. VizeprÃ¤sident Westphal (17,182æ¬¡)
2. VizeprÃ¤sident Dr. Jaeger (17,026æ¬¡)
3. VizeprÃ¤sident Dr. Schmitt-Vockenhausen (15,807æ¬¡)
4. VizeprÃ¤sidentin Petra Pau (15,404æ¬¡)
5. VizeprÃ¤sident Dr. Schmid (14,440æ¬¡)
... (å…¶ä»–è¯¦è§æŠ¥å‘Šæ–‡ä»¶)

## ä½¿ç”¨æ–¹æ³•

### è¿è¡Œåˆ†æè„šæœ¬

```bash
python analyze_metadata.py
```

### è„šæœ¬åŠŸèƒ½

1. **è‡ªåŠ¨æ‰«æ**: è‡ªåŠ¨è¯»å–`data/pp_json_49-21/`ç›®å½•ä¸‹çš„æ‰€æœ‰JSONæ–‡ä»¶
2. **æå–å…ƒæ•°æ®**: ä»æ¯ä¸ªJSONæ–‡ä»¶çš„transcriptä¸­æå–metadataä¿¡æ¯
3. **ç»Ÿè®¡åˆ†æ**: åˆ†ægroupå’Œspeakerå­—æ®µçš„åˆ†å¸ƒæƒ…å†µ
4. **ç”Ÿæˆæ˜ å°„è¡¨**: åˆ›å»ºå…šæ´¾åç§°æ˜ å°„è¡¨å’Œè®®å‘˜-å…šæ´¾åŠ¨æ€æ˜ å°„è¡¨
5. **ç”ŸæˆæŠ¥å‘Š**: è¾“å‡ºè¯¦ç»†çš„ç»Ÿè®¡åˆ†ææŠ¥å‘Š

## æ•°æ®ç»“æ„

### JSONæ–‡ä»¶ç»“æ„ç¤ºä¾‹

```json
{
  "session": 1949,
  "transcript": [
    {
      "type": "text_block",
      "metadata": {
        "session": "001",
        "month": "09",
        "group": "SPD",
        "id": "pp_01_001_00002",
        "year": "1949",
        "day": "07",
        "speaker": "Dr. Adenauer",
        "lp": "01"
      },
      "speech": "..."
    }
  ]
}
```

### å…³é”®å­—æ®µè¯´æ˜

- `session`: ä¼šæœŸç¼–å·
- `year`: å¹´ä»½
- `month`: æœˆä»½
- `day`: æ—¥æœŸ
- `speaker`: å‘è¨€äººå§“å
- `group`: æ‰€å±å…šæ´¾
- `lp`: ç«‹æ³•æœŸ (Legislaturperiode)

## æ•°æ®åˆ†æå‘ç°

### 1. å…šæ´¾åˆ†å¸ƒç‰¹å¾

- **ä¸»è¦å…šæ´¾**: CDU/CSUå’ŒSPDé•¿æœŸå æ®ä¸»å¯¼åœ°ä½
- **ç»¿å…šå´›èµ·**: ä»1980å¹´ä»£å¼€å§‹ï¼Œç»¿å…šé€æ¸æˆä¸ºé‡è¦æ”¿æ²»åŠ›é‡
- **å·¦ç¿¼æ•´åˆ**: PDSæ¼”å˜ä¸ºDIE LINKE
- **æ–°å…´åŠ¿åŠ›**: AfDåœ¨2010å¹´ä»£åå‡ºç°

### 2. æ•°æ®è´¨é‡

- **ç¼ºå¤±å€¼**: çº¦54.78%çš„è®°å½•groupå­—æ®µä¸ºNoneï¼ˆå¯èƒ½ä¸ºéå…šæ´¾å‘è¨€æˆ–ä¸»å¸­å‘è¨€ï¼‰
- **æ ‡æ³¨ä¸ä¸€è‡´**: åŒä¸€å…šæ´¾å¯èƒ½æœ‰å¤šç§å†™æ³•ï¼ˆå¦‚ç»¿å…šçš„ä¸åŒæ ‡æ³¨ï¼‰
- **ç‰¹æ®Šæ ‡è®°**: åŒ…å«-Gast(å®¢åº§)ã€-Hosp.(å€™è¡¥)ç­‰æ ‡è®°
- **æ•°æ®æ¸…æ´—**: å·²è‡ªåŠ¨æ¸…ç†speakerå­—æ®µä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆå¾·è¯­å¼•å·ç­‰ï¼‰
  - ç§»é™¤äº†å¼€å¤´çš„å¾·è¯­å¼•å·â€ã€â€œ
  - ç»Ÿä¸€äº†speakeråç§°æ ¼å¼
  - å‡å°‘äº†é‡å¤è®°å½•

### 3. è®®å‘˜å˜åŠ¨

- å‘ç°å¤šä½è®®å‘˜æœ‰å…šæ´¾å˜åŠ¨è®°å½•
- éƒ¨åˆ†å˜åŠ¨å¯èƒ½ç”±äºå…šæ´¾é‡ç»„æˆ–åˆå¹¶

## æ³¨æ„äº‹é¡¹

1. **ç¼–ç é—®é¢˜**: æ–‡ä»¶ä½¿ç”¨UTF-8ç¼–ç ï¼ŒCSVæ–‡ä»¶ä½¿ç”¨UTF-8-BOMç¡®ä¿Excelæ­£ç¡®æ˜¾ç¤ºä¸­æ–‡
2. **æ•°æ®æ¸…æ´—**: Noneå€¼è¡¨ç¤ºæ— å…šæ´¾æˆ–æœªæ ‡æ³¨ï¼Œéœ€æ ¹æ®å…·ä½“åœºæ™¯å¤„ç†
3. **å…šæ´¾åç§°**: éƒ¨åˆ†å…šæ´¾æœ‰å¤šç§å¾·è¯­è¡¨ç¤ºæ–¹å¼ï¼Œå·²åœ¨æ˜ å°„è¡¨ä¸­ç»Ÿä¸€
4. **æ—¶é—´è·¨åº¦**: æ•°æ®è¦†ç›–1949-2021å¹´ï¼Œè·¨è¶Šå¤šä¸ªæ”¿æ²»æ—¶æœŸ

## æŠ€æœ¯æ ˆ

- Python 3.x
- æ ‡å‡†åº“: json, csv, glob, collections

## æœªæ¥æ”¹è¿›æ–¹å‘

1. **çˆ¬å–è®®å‘˜ä¿¡æ¯**: ä»å®˜æ–¹ç½‘ç«™çˆ¬å–æ›´å‡†ç¡®çš„è®®å‘˜-å…šæ´¾æ˜ å°„å…³ç³»
2. **æ•°æ®è¡¥å……**: è¡¥å……Noneå€¼ä¸­å¯æ¨æ–­çš„å…šæ´¾ä¿¡æ¯
3. **å¯è§†åŒ–åˆ†æ**: ç”Ÿæˆå…šæ´¾åŠ¿åŠ›æ¼”å˜å›¾è¡¨
4. **æ–‡æœ¬åˆ†æ**: å¯¹speechå†…å®¹è¿›è¡Œä¸»é¢˜åˆ†æå’Œæƒ…æ„Ÿåˆ†æ
5. **å…³ç³»ç½‘ç»œ**: æ„å»ºè®®å‘˜äº’åŠ¨ç½‘ç»œå’Œå…šæ´¾è”ç›Ÿå…³ç³»å›¾

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æå‡ºIssueæˆ–Pull Requestã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ç”¨äºå­¦æœ¯ç ”ç©¶å’Œæ•°æ®åˆ†æç›®çš„ã€‚
